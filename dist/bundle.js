(()=>{"use strict";var t={d:(e,r)=>{for(var s in r)t.o(r,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:r[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function r(t){const e=new Uint8Array(2);return new DataView(e.buffer).setInt16(0,t,!0),e}function s(t){const e=new Uint8Array(4);return new DataView(e.buffer).setInt32(0,t,!0),e}function i(t){const e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,t,!0),e}function n(t){const e=new Uint8Array(8);return new DataView(e.buffer).setBigInt64(0,t,!0),e}function a(t){const e=new Uint8Array(4);return new DataView(e.buffer).setFloat32(0,t,!0),e}function h(t){const e=new Uint8Array(8);return new DataView(e.buffer).setFloat64(0,t,!0),e}function o(t){if(""===t){const t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,0,!0),t}const e=i(t.length+1),r=(new TextEncoder).encode(t);return new Uint8Array([...e,...r,0])}function y(t){return Uint8Array.from(t.match(/../g).map(t=>parseInt(t,16)))}t.r(e),t.d(e,{ArrayProperty:()=>F,BoolProperty:()=>w,ByteProperty:()=>x,EnumProperty:()=>k,FileEndProperty:()=>J,FloatProperty:()=>E,HeaderProperty:()=>l,Int64Property:()=>P,IntProperty:()=>B,MapProperty:()=>_,MulticastInlineDelegateProperty:()=>O,NameProperty:()=>b,NoneProperty:()=>c,ObjectProperty:()=>C,SetProperty:()=>M,StrProperty:()=>I,StructProperty:()=>D,UInt32Property:()=>U});class u{static GVAS=new Uint8Array([71,86,65,83]);type="HeaderProperty";constructor(t){t.skipBytes(u.GVAS.length),this.saveGameVersion=t.readInt32(),this.packageVersion=t.readInt32(),this.saveGameVersion>=3&&(this.ue5=t.readInt32()),this.engineVersion=t.readInt16()+"."+t.readInt16()+"."+t.readInt16(),this.engineBuild=t.readUInt32(),this.engineBranch=t.readString(),this.customVersionFormat=t.readInt32();const e=t.readInt32(),r=new Map;for(let s=0;s<e;s++)r.set(t.readBytes(16),t.readInt32());this.customVersions=Array.from(r.entries()),this.saveGameClassName=t.readString()}toBytes(){let t=new Uint8Array([...u.GVAS,...s(this.saveGameVersion),...s(this.packageVersion),...void 0!==this.ue5?s(this.ue5):[],...r(this.engineVersion.split(".")[0]),...r(this.engineVersion.split(".")[1]),...r(this.engineVersion.split(".")[2]),...i(this.engineBuild),...o(this.engineBranch),...s(this.customVersionFormat),...s(this.customVersions.length)]);for(let e=0;e<this.customVersions.length;e++)t=new Uint8Array([...t,...y(this.customVersions[e][0]),...s(this.customVersions[e][1])]);return t=new Uint8Array([...t,...o(this.saveGameClassName)]),t}}const l=u;class d{static bytes=new Uint8Array([5,0,0,0,78,111,110,101,0]);type="NoneProperty";toBytes(){return d.bytes}}const c=d;class p{constructor(t){this.offset=0,this.totalByteSize=t,this.array=new Uint8Array(t),this.dataView=new DataView(this.array.buffer)}writeString(t){if(""===t)this.dataView.setUint32(this.offset,0,!0),this.offset+=4;else{this.dataView.setUint32(this.offset,t.length+1,!0),this.offset+=4;const e=(new TextEncoder).encode(t);this.array.set(e,this.offset),this.offset+=t.length,this.array[this.offset++]=0}}writeArray(t){this.array.set(t,this.offset),this.offset+=t.length}writeByte(t){this.array[this.offset++]=t}writeBoolean(t){this.array[this.offset++]=t?1:0}writeInt32(t){this.dataView.setInt32(this.offset,t,!0),this.offset+=4}writeUInt32(t){this.dataView.setUint32(this.offset,t,!0),this.offset+=4}writeInt64(t){this.dataView.setBigInt64(this.offset,t,!0),this.offset+=8}writeGuid(t){const e=[t.slice(0,8),t.slice(8,16),t.slice(16,24),t.slice(24,32)].map(t=>t.match(/.{2}/g).reverse().join("")).join("").toUpperCase();this.writeArray(e.match(/../g).map(t=>parseInt(t,16)))}}function g(t){return""===t?4:5+t.length}class f{static PADDING=[0,0,0,0,0,0,0,0];constructor(t,e){this.name=t,this.type="BoolProperty",e.skipBytes(8),this.value=e.readBoolean(),this.hasGuid=e.readBoolean(),this.hasGuid&&(this.guid=e.readGuid())}getByteSize(){return g(this.name)+27+(this.hasGuid?16:0)}write(t){t.writeString(this.name),t.writeString(this.type),t.writeArray(f.PADDING),t.writeBoolean(this.value),t.writeBoolean(this.hasGuid),this.hasGuid&&t.writeGuid(this.guid)}toBytes(){const t=new p(this.getByteSize());return this.write(t),t.array}}const w=f;class m{static SIZE_FOUR=[4,0,0,0,0,0,0,0];constructor(t,e){this.name=t,this.type="IntProperty",e.skipBytes(8),this.hasGuid=e.readBoolean(),this.hasGuid&&(this.guid=e.readGuid()),this.value=e.readInt32()}getByteSize(){return g(this.name)+29+(this.hasGuid?16:0)}write(t){t.writeString(this.name),t.writeString(this.type),t.writeArray(m.SIZE_FOUR),t.writeBoolean(this.hasGuid),this.hasGuid&&t.writeGuid(this.guid),t.writeInt32(this.value)}toBytes(){const t=new p(this.getByteSize());return this.write(t),t.array}}const B=m;class S{static SIZE_FOUR=[4,0,0,0,0,0,0,0];constructor(t,e){this.name=t,this.type="UInt32Property",e.skipBytes(8),this.hasGuid=e.readBoolean(),this.hasGuid&&(this.guid=e.readGuid()),this.value=e.readUInt32()}getByteSize(){return g(this.name)+32+(this.hasGuid?16:0)}write(t){t.writeString(this.name),t.writeString(this.type),t.writeArray(S.SIZE_FOUR),t.writeBoolean(this.hasGuid),this.hasGuid&&t.writeGuid(this.guid),t.writeUInt32(this.value)}toBytes(){const t=new p(this.getByteSize());return this.write(t),t.array}}const U=S;class A{static SIZE_EIGHT=[8,0,0,0,0,0,0,0];constructor(t,e){this.name=t,this.type="Int64Property",e.skipBytes(8),this.hasGuid=e.readBoolean(),this.hasGuid&&(this.guid=e.readGuid()),this.value=e.readInt64()}getByteSize(){return g(this.name)+35+(this.hasGuid?16:0)}write(t){t.writeString(this.name),t.writeString(this.type),t.writeArray(A.SIZE_EIGHT),t.writeBoolean(this.hasGuid),this.hasGuid&&t.writeGuid(this.guid),t.writeInt64(this.value)}toBytes(){const t=new(require("../sav-writer"))(this.getByteSize());return this.write(t),t.array}}const P=A;class v{static PADDING=[0,0,0,0];constructor(t,e){this.name=t,this.type="StrProperty",e.skipBytes(8),this.hasGuid=e.readBoolean(),this.hasGuid&&(this.guid=e.readGuid()),this.value=e.readString()}getByteSize(){return g(this.name)+25+(this.hasGuid?16:0)+g(this.value)}write(t){t.writeString(this.name),t.writeString(this.type),t.writeUInt32((this.hasGuid?16:0)+g(this.value)),t.writeArray(v.PADDING),t.writeBoolean(this.hasGuid),this.hasGuid&&t.writeGuid(this.guid),t.writeString(this.value)}toBytes(){const t=new p(this.getByteSize());return this.write(t),t.array}}const I=v,b=class{type="NameProperty";constructor(t,e){this.name=t,e.skipBytes(9),this.value=e.readString()}toBytes(){const t=o(this.name),e=o(this.type),r=o(this.value),s=i(r.length),n=new Uint8Array(4),a=new Uint8Array([0]),h=t.length+e.length+s.length+n.length+a.length+r.length,y=new Uint8Array(h);let u=0;return y.set(t,u),u+=t.length,y.set(e,u),u+=e.length,y.set(s,u),u+=s.length,y.set(n,u),u+=n.length,y.set(a,u),u+=a.length,y.set(r,u),y}};class G{static padding=new Uint8Array([0,0,0,0]);type="EnumProperty";constructor(t,e){this.name=t,this.type="EnumProperty",e.readUInt32(),e.skipBytes(G.padding.length),this.enum=e.readString(),e.skipBytes(1),this.value=e.readString()}toBytes(){const t=o(this.name),e=o(this.type),r=i(4+this.value.length+1),s=o(this.enum),n=o(this.value),a=t.length+e.length+r.length+G.padding.length+s.length+1+n.length,h=new Uint8Array(a);let y=0;return h.set(t,y),y+=t.length,h.set(e,y),y+=e.length,h.set(r,y),y+=r.length,h.set(G.padding,y),y+=G.padding.length,h.set(s,y),y+=s.length,h[y++]=0,h.set(n,y),h}}const k=G;class V{static padding=new Uint8Array([4,0,0,0,0,0,0,0,0]);type="FloatProperty";constructor(t,e){this.name=t,e.skipBytes(V.padding.length),this.value=e.readFloat32()}toBytes(){const t=o(this.name),e=o(this.type),r=V.padding,s=a(this.value),i=t.length+e.length+r.length+s.length,n=new Uint8Array(i);let h=0;return n.set(t,h),h+=t.length,n.set(e,h),h+=e.length,n.set(r,h),h+=r.length,n.set(s,h),n}}const E=V;class T{static padding=new Uint8Array([0,0,0,0]);type="StructProperty";constructor(t,e){this.name=t;const r=e.readUInt32();e.skipBytes(4),this.subtype=e.readString(),this.guid=e.readBytes(16),e.skipBytes(1);const s=e.offset+r;if("Guid"===this.subtype)return this.value=e.readBytes(16),this;if("DateTime"===this.subtype)return this.value=e.readInt64(),this;if("Vector2D"===this.subtype)return this.value="("+e.readFloat64()+"/"+e.readFloat64()+")",this;for(this.value=[];e.offset<s;)this.value.push(e.readProperty())}toBytes(){if("Guid"===this.subtype)return new Uint8Array([...o(this.name),...o(this.type),...i(16),...T.padding,...o("Guid"),...y(this.guid+"00"),...y(this.value)]);if("DateTime"===this.subtype)return new Uint8Array([...o(this.name),...o(this.type),...i(8),...T.padding,...o("DateTime"),...y(this.guid+"00"),...n(this.value)]);if("Vector2D"===this.subtype){const t=this.value.slice(1,-1).split("/"),e=t[0],r=t[1];return new Uint8Array([...o(this.name),...o(this.type),...i(16),...T.padding,...o("Vector2D"),...y(this.guid+"00"),...h(e),...h(r)])}let t=new Uint8Array(0);for(let e=0;e<this.value.length;e++)if(Array.isArray(this.value[e]))for(let r=0;r<this.value[e].length;r++)t=new Uint8Array([...t,...K(this.value[e][r]).toBytes()]);else t=new Uint8Array([...t,...K(this.value[e]).toBytes()]);return new Uint8Array([...o(this.name),...o(this.type),...i(t.length),...T.padding,...o(this.subtype),...y(this.guid+"00"),...t])}}const D=T;class N{static padding=new Uint8Array([0,0,0,0]);type="ArrayProperty";constructor(t,e){this.name=t;const r=e.readUInt32();switch(e.skipBytes(4),this.subtype=e.readString(),e.skipBytes(1),this.subtype){case"StructProperty":const t=e.readUInt32();if(e.readString()!==this.name)throw new Error;if(e.readString()!==this.subtype)throw new Error;if(e.readUInt32(),e.skipBytes(4),this.genericType=e.readString(),this.guid=e.readBytes(16),e.skipBytes(1),this.value=[],"Guid"===this.genericType)for(let r=0;r<t;r++)this.value.push(e.readBytes(16));else for(let r=0;r<t;r++){const t=[];let r=null;for(;!(r instanceof c);)r=e.readProperty(),t.push(r);this.value.push(t)}break;case"NameProperty":const s=e.readUInt32();this.value=[];for(let t=0;t<s;t++)this.value.push(e.readString());break;default:this.value=e.readBytes(r)}}toBytes(){const t=this.value.length;let e,r=new Uint8Array(0);switch(this.subtype){case"StructProperty":if("Guid"===this.genericType)for(let e=0;e<t;e++)r=new Uint8Array([...r,...y(this.value[e])]);else for(let e=0;e<t;e++)if(Array.isArray(this.value[e]))for(let t=0;t<this.value[e].length;t++)r=new Uint8Array([...r,...K(this.value[e][t]).toBytes()]);else r=new Uint8Array([...r,...K(this.value[e]).toBytes()]);return e=8+this.name.length+1+4+this.subtype.length+1+4+N.padding.length+4+this.genericType.length+1+16+1+r.length,new Uint8Array([...o(this.name),...o(this.type),...i(e),...N.padding,...o(this.subtype),0,...i(t),...o(this.name),...o(this.subtype),...i(r.length),...N.padding,...o(this.genericType),...y(this.guid+"00"),...r]);case"NameProperty":e=4;for(let s=0;s<t;s++)r=new Uint8Array([...r,...o(this.value[s])]),e+=4+this.value[s].length+1;return new Uint8Array([...o(this.name),...o(this.type),...i(e),...N.padding,...o(this.subtype),0,...i(t),...r]);default:return e=this.value.length/2,new Uint8Array([...o(this.name),...o(this.type),...i(e),...N.padding,...o(this.subtype),0,...y(this.value)])}}}const F=N;class z{static PADDING=[0,0,0,0];constructor(t,e){this.name=t,this.type="MulticastInlineDelegateProperty",e.skipBytes(8),this.hasGuid=e.readBoolean(),this.hasGuid&&(this.guid=e.readGuid());const r=e.readUInt32();this.elements=Array.from({length:r},()=>[e.readString(),e.readString()])}getByteSize(){return g(this.name)+45+(this.hasGuid?16:0)+this._getContentSize()}_getContentSize(){let t=4;for(const[e,r]of this.elements)t+=g(e)+g(r);return t}write(t){t.writeString(this.name),t.writeString(this.type),t.writeUInt32(this._getContentSize()),t.writeArray(z.PADDING),t.writeBoolean(this.hasGuid),this.hasGuid&&t.writeGuid(this.guid),t.writeUInt32(this.elements.length);for(const[e,r]of this.elements)t.writeString(e),t.writeString(r)}toBytes(){const t=new p(this.getByteSize());return this.write(t),t.array}}const O=z;class j{static padding=new Uint8Array([0,0,0,0]);type="MapProperty";constructor(t,e){this.name=t,e.readUInt32(),e.skipBytes(4),this.keyType=e.readString(),this.valueType=e.readString(),e.skipBytes(1);const r=new Map;e.skipBytes(4);const s=e.readUInt32();for(let t=0;t<s;t++){let t=null,s=null;switch(this.keyType){case"StructProperty":t=e.readBytes(16);break;case"IntProperty":t=e.readInt32();break;case"StrProperty":t=e.readString();break;default:throw new Error("Key Type not implemented: "+this.keyType)}switch(this.valueType){case"StructProperty":s=[];let t=null;for(;!(t instanceof c);)t=e.readProperty(),s.push(t);break;case"IntProperty":s=e.readInt32();break;case"FloatProperty":s=e.readFloat32();break;case"BoolProperty":s=e.readBoolean();break;case"StrProperty":s=e.readString();break;default:throw new Error("Value Type not implemented: "+this.valueType)}r.set(t,s)}this.value=Array.from(r.entries())}toBytes(){let t=new Uint8Array(0);const e=new Map(this.value);for(let[r,i]of e){switch(this.keyType){case"StructProperty":t=new Uint8Array([...t,...y(r)]);break;case"IntProperty":t=new Uint8Array([...t,...s(r)]);break;case"StrProperty":t=new Uint8Array([...t,...o(r)]);break;default:throw new Error("Key Type not implemented: "+this.keyType)}switch(this.valueType){case"StructProperty":for(let e=0;e<i.length;e++)t=new Uint8Array([...t,...K(i[e]).toBytes()]);break;case"IntProperty":t=new Uint8Array([...t,...s(i)]);break;case"FloatProperty":t=new Uint8Array([...t,...a(i)]);break;case"StrProperty":t=new Uint8Array([...t,...o(i)]);break;case"BoolProperty":t=!0===i?new Uint8Array([...t,1]):new Uint8Array([...t,0]);break;default:throw new Error("Value Type not implemented: "+this.valueType)}}return new Uint8Array([...o(this.name),...o(this.type),...i(8+t.length),...j.padding,...o(this.keyType),...o(this.valueType),...j.padding,0,...i(e.size),...t])}}const _=j;class H{static padding=new Uint8Array([0,0,0,0]);type="SetProperty";constructor(t,e){this.name=t;const r=e.readUInt32();if(e.skipBytes(4),this.subtype=e.readString(),e.skipBytes(1),"StructProperty"===this.subtype){e.skipBytes(4);const t=e.readUInt32();this.value=[];for(let r=0;r<t;r++)this.value.push(e.readBytes(16));return this}this.value=e.readBytes(r)}toBytes(){if("StructProperty"===this.subtype){const t=this.value.length;let e=new Uint8Array(0);for(let r=0;r<t;r++)e=new Uint8Array([...e,...y(this.value[r])]);return new Uint8Array([...o(this.name),...o(this.type),...i(8+e.length),...H.padding,...o(this.subtype),0,...H.padding,...i(t),...e])}return new Uint8Array([...o(this.name),...o(this.type),...i(this.value.length/2),...H.padding,...o(this.subtype),0,...y(this.value)])}}const M=H;class R{static padding=new Uint8Array([0,0,0,0,0]);type="ObjectProperty";constructor(t,e){this.name=t,e.readUInt32(),e.skipBytes(5),this.value=e.readString()}toBytes(){const t=o(this.name),e=o(this.type),r=i(4+this.value.length+1),s=R.padding,n=o(this.value),a=t.length+e.length+r.length+s.length+n.length,h=new Uint8Array(a);let y=0;return h.set(t,y),y+=t.length,h.set(e,y),y+=e.length,h.set(r,y),y+=r.length,h.set(s,y),y+=s.length,h.set(n,y),h}}const C=R;class Z{static SIZE_ONE=[1,0,0,0,0,0,0,0];constructor(t,e){this.name=t,this.type="ByteProperty",e.skipBytes(8),this.subtype=e.readString(),this.hasGuid=e.readBoolean(),this.hasGuid&&(this.guid=e.readGuid()),this.value=e.readByte()}getByteSize(){return g(this.name)+g(this.subtype)+27+(this.hasGuid?16:0)}write(t){t.writeString(this.name),t.writeString(this.type),t.writeArray(Z.SIZE_ONE),t.writeString(this.subtype),t.writeBoolean(this.hasGuid),this.hasGuid&&t.writeGuid(this.guid),t.writeByte(this.value)}toBytes(){const t=new(require("../sav-writer"))(this.getByteSize());return this.write(t),t.array}}const x=Z;class L{static bytes=new Uint8Array([...c.bytes,0,0,0,0]);type="FileEndProperty";toBytes(){return L.bytes}}const J=L,q=class{constructor(t){this.offset=0,this.fileArrayBuffer=t,this.fileSize=t.byteLength,this.dataView=new DataView(t),this.propertyHistogram={}}readWholeBuffer(){const t=[],e=this.readHeader();for(t.push(e);!this.hasFinished();){const e=this.readProperty();t.push(e)}const r=Object.entries(this.propertyHistogram).sort((t,e)=>e[1]-t[1]).reduce((t,[e,r])=>(t[e]=r,t),{});return console.table(r),t}hasFinished(){return this.offset===this.fileSize}readHeader(){return new l(this)}readProperty(){if(this.offset+J.bytes.length===this.fileSize&&new Uint8Array(this.fileArrayBuffer.slice(this.offset,this.offset+J.bytes.length)).every((t,e)=>t===J.bytes[e]))return this.offset+=J.bytes.length,this._incrementHistogram("FileEndProperty"),new J;const t=this.readString();if("None"===t)return this._incrementHistogram("NoneProperty"),new c;const e=this.readString();switch(this._incrementHistogram(e),e){case"BoolProperty":return new w(t,this);case"IntProperty":return new B(t,this);case"UInt32Property":return new U(t,this);case"Int64Property":return new P(t,this);case"StrProperty":return new I(t,this);case"NameProperty":return new b(t,this);case"EnumProperty":return new k(t,this);case"FloatProperty":return new E(t,this);case"StructProperty":return new D(t,this);case"ArrayProperty":return new F(t,this);case"MulticastInlineDelegateProperty":return new O(t,this);case"MapProperty":return new _(t,this);case"SetProperty":return new M(t,this);case"ObjectProperty":return new C(t,this);case"ByteProperty":return new x(t,this);default:throw new Error("Unknown property type: "+e)}}_incrementHistogram(t){this.propertyHistogram[t]?this.propertyHistogram[t]++:this.propertyHistogram[t]=1}readString(){const t=this.dataView.getUint32(this.offset,!0);this.offset+=4;const e=(new TextDecoder).decode(this.fileArrayBuffer.slice(this.offset,this.offset+t-1));return this.offset+=t,e}readBoolean(){const t=Boolean(this.dataView.getUint8(this.offset));return this.offset+=1,t}readFloat32(){const t=this.dataView.getFloat32(this.offset,!0);return this.offset+=4,t}readFloat64(){const t=this.dataView.getFloat64(this.offset,!0);return this.offset+=8,t}readByte(){const t=Number(this.dataView.getUint8(this.offset));return this.offset+=1,t}readInt16(){const t=Number(this.dataView.getInt16(this.offset,!0));return this.offset+=2,t}readInt32(){const t=Number(this.dataView.getInt32(this.offset,!0));return this.offset+=4,t}readUInt32(){const t=Number(this.dataView.getUint32(this.offset,!0));return this.offset+=4,t}readInt64(){const t=this.dataView.getBigInt64(this.offset,!0);return this.offset+=8,t}readGuid(){const t=this.readBytes(16);return[t.slice(0,8),t.slice(8,16),t.slice(16,24),t.slice(24,32)].map(t=>t.match(/.{2}/g).reverse().join("")).join("").toUpperCase()}readBytes(t){const e=(r=this.fileArrayBuffer.slice(this.offset,this.offset+t),[...new Uint8Array(r)].reduce((t,e)=>t+e.toString(16).padStart(2,"0"),""));var r;return this.offset+=t,e}skipBytes(t){this.offset+=t}};function K(t){const r=e[t.type];if(!r)throw new Error("Unknown property type: "+t.type);const s=Object.create(r.prototype);return Object.assign(s,t),s}BigInt.prototype.toJSON=function(){return this.toString()},document.getElementById("sav-input").addEventListener("change",function(){const t=new FileReader;t.fileName=this.files[0].name,t.onload=function(e){!function(t,e){const r=document.createElement("a");r.setAttribute("href","data:text/json;charset=utf-8,"+encodeURIComponent(e)),r.setAttribute("download",t),r.click()}(t.fileName+".json",function(t){const e=new q(t).readWholeBuffer();return JSON.stringify(e,null,2)}(e.target.result))},t.readAsArrayBuffer(this.files[0])}),document.getElementById("json-input").addEventListener("change",function(){const t=new FileReader;t.fileName=this.files[0].name,t.onload=function(e){!function(t,e){const r=new Blob([e],{type:"octet/stream"}),s=document.createElement("a");s.setAttribute("href",window.URL.createObjectURL(r)),s.setAttribute("download",t),s.click()}(t.fileName+".sav",function(t){const e=JSON.parse(t).map(t=>K(t).toBytes()),r=e.reduce((t,e)=>t+e.length,0),s=new Uint8Array(r);let i=0;for(const t of e)s.set(t,i),i+=t.length;return s}(e.target.result))},t.readAsText(this.files[0])})})();